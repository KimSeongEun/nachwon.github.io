---
layout: post
title: '[Django Tutorial] Blog 만들기 - 4. 모델'
category: Django
author: Che1
---
<div class="navigation-menu">
    <h5>[Django Tutorial] Blog 만들기</h5>
    <ol>
        <li><a href="/django/2017/09/28/django-1-setting.html">환경설정</a></li>
        <li><a href="/django/2017/09/30/django-2-start.html">프로젝트 시작</a></li>
        <li><a href="/django/2017/09/30/django-3-database.html">데이터베이스</a></li>
        <li><a href="/django/2017/09/30/django-4-app.html">모델</a></li>
    </ol>
</div>

- - -

#### 앱(Application)

`앱(Application)`은 `Django` 프로젝트 내에서 사용하는 Python 패키지이다.  
하나의 앱은 자신만의 독자적인 `모델(Model)`, `뷰(View)`, `템플릿(Template)` 을 포함하고 있으며, 일반적으로 하나의 `Django` 프로젝트는 여러 개의 앱으로 구성된다.
`Django` 에서 기본적으로 제공되는 앱들이 있고, 또 사용자가 직접 만들어서 추가할 수도 있다. 우리가 만들려고 하는 `blog` 도 하나의 앱이 된다.

모든 `Django` 프로젝트에 대한 설정은 `settings.py` 에 저장되어있으며, 이 곳에서 현재 `Django` 프로젝트 내부에서 엑티브 상태인 앱의 목록을 확인할 수 있다. 나중에 앱을 만들면 바로 이 곳에 추가하여 엑티브 상태로 만들어준다.

```python
# settings.py line 33

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
]
```
위의 목록을 보면 이미 몇 가지의 앱들이 기본적으로 포함되어 있는 것을 볼 수 있다.  
이제 이 곳에 추가할 앱을 직접 만들어보자.

#### 앱 생성하기

이제 본격적으로 블로그를 만들어 보자.  
블로그는 하나의 앱으로서 `Django` 에 인식된다. 앱에 대해서는 이전의 포스트에서 잠깐 알아보았다.  
앱을 시작하기 위해서는 `manage.py` 가 있는 폴더에서 아래의 명령어를 사용한다.
```
python manage.py startapp 앱이름
```

우리는 블로그 앱을 만드는 것이니, `blog` 라고 이름지어주자.

```
./manage.py startapp blog  # python manage.py는 ./manage.py로 줄여쓸 수 있다.
``` 

디렉토리를 확인해보면 아래와 같이 `blog` 라는 폴더가 생긴 것을 확인할 수 있다.

```
myproject  # 프로젝트 폴더
├── blog  # 앱 폴더
│   ├── admin.py
│   ├── apps.py
│   ├── __init__.py
│   ├── migrations
│   │   └── __init__.py
│   ├── models.py
│   ├── tests.py
│   └── views.py
├── config  # 설정 폴더
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── db.sqlite3
└── manage.py
```

생성된 파일들은 차차 알아보도록 하고, 일단 만들어진 우리의 `blog` 앱을 등록시켜야한다.  
`settings.py` 의 `INSTALLED_APPS` 리스트에 `blog` 를 아래와 같이 추가시켜준다.

```python
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    'blog',  # blog 추가
]
```

- - -
#### MVC 패턴

모델을 만들기 전에, `MVC` 패턴에 대해서 먼저 알아보자.  

> #### Model-View-Controller (MVC)
>
> 모델-뷰-컨트롤러(Model–View–Controller, MVC)는 소프트웨어 공학에서 사용되는 소프트웨어 디자인 패턴이다. 이 패턴을 성공적으로 사용하면, 사용자 인터페이스로부터 비즈니스 로직을 분리하여 애플리케이션의 시각적 요소나 그 이면에서 실행되는 비즈니스 로직을 서로 영향 없이 쉽게 고칠 수 있는 애플리케이션을 만들 수 있다. MVC에서 모델은 애플리케이션의 정보(데이터)를 나타내며, 뷰는 텍스트, 체크박스 항목 등과 같은 사용자 인터페이스 요소를 나타내고, 컨트롤러는 데이터와 비즈니스 로직 사이의 상호동작을 관리한다.  
> 출처: [위키피디아](https://ko.wikipedia.org/wiki/%EB%AA%A8%EB%8D%B8-%EB%B7%B0-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC)

`MVC` 패턴은 웹 어플리케이션 개발에서 주로 사용되는 `디자인 패턴` 이다. 

> #### 디자인 패턴
>
> 프로그램 개발에서 자주 나타나는 과제를 해결하기 위한 방법 중 하나로, 과거의 소프트웨어 개발 과정에서 발견된 설계의 노하우를 축적하여 이름을 붙여, 이후에 재이용하기 좋은 형태로 특정의 규약을 묶어서 정리한 것이다.  
> 출처: [위키피디아](https://ko.wikipedia.org/wiki/%EB%94%94%EC%9E%90%EC%9D%B8_%ED%8C%A8%ED%84%B4)

`MVC` 패턴은 웹 어플리케이션을 크게 `모델`, `뷰`,`컨트롤러` 의 세 부분으로 구분한다.

- **모델**: 

- - -
#### 모델 만들기

앱을 시작하였으니 이제 `모델` 을 만들어야 한다.  

> #### Models
>A model is the single, definitive source of information about your data. It contains the essential fields and behaviors of the data you’re storing. Generally, each model maps to a single database table.  
>출처: [Django 공식 문서](https://docs.djangoproject.com/en/1.11/topics/db/models/)

모델은 데이터에 대한 정보를 담고 있으며, 데이터베이스와 직접적으로 연결된다.

- 모델은 Python 클래스이며, `django.db.models.Model` 클래스를 상속받는 서브클래스이다.
- 모델 클래스의 속성들은 데이터베이스의 필드가 된다.
- `Django` 는 모델 클래스를 통해 데이터베이스에 접근할 수 있는 `API` 를 자동적으로 생성해준다.

모델은 `blog` 폴더 내의 `models.py` 파일에 클래스 객체를 생성하여 만들 수 있다.  


그렇다면 우리가 만들려는 블로그에는 어떤 모델이 필요할까? 블로그가 다루는 데이터에 대해 잠깐 생각해보자.  
자신이 쓴 글을 등록하여 열람할 수 있게 하는 것이 블로그의 기본 기능일 것이다. 그렇다면 이 때 데이터는 자신이 쓴 글들이 될 것이다.  
그럼 하나의 글은 어떤 구조를 가져야할 까?  
- 가장 기본적으로 글의 제목과 내용이 있어야할 것이다.  
- 또, 글쓴이가 누구인지를 표시해주면 좋을 것 같다.  
- 언제 작성된 글인지 표시해주면 유용할 것이다.

이를 정리하면 아래와 같다.  

- 글쓴이
- 글 제목
- 글 내용
- 글 생성 시간

이 내용을 가지고 모델을 작성해보자.

`blog` 폴더의 `models.py` 파일을 열어 아래와 같이 작성한다.

```python
from django.db import models


class Post(models.Model):
    author = models.ForeignKey(settings.AUTH_USER_MODEL)
    title = models.CharField(max_length=100)
    content = models.TextField(blank=True)
    created_date = models.DateTimeField(auto_now_add=True)
    published_date = models.DateTimeField(blank=True, null=True)
```